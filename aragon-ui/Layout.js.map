{"version":3,"file":"Layout.js","sources":["../src/components/Layout/Layout.js"],"sourcesContent":["import React, { useContext, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { useViewport } from '../../providers/Viewport/Viewport'\nimport { BREAKPOINTS, GU } from '../../style'\nimport { cssPx } from '../../utils'\n\nfunction getSizes(breakpoints) {\n  return Object.entries(breakpoints)\n    .filter(([name]) => name !== 'min')\n    .sort((a, b) => a[1] - b[1])\n}\n\n// Minimum margin around a layouts\nconst MIN_MARGIN = 3 * GU\n\nfunction getLayoutSize(parentWidth, breakpoints) {\n  const sizes = getSizes(breakpoints)\n\n  let index = sizes.length\n  while (index--) {\n    if (parentWidth >= sizes[index][1]) {\n      return [\n        sizes[index][0],\n        sizes[index][1] - (index === 0 ? 0 : MIN_MARGIN * 2),\n      ]\n    }\n  }\n\n  return sizes[0]\n}\n\nconst LayoutContext = React.createContext({})\n/**\n * Some layout method\n *\n * @typedef {object} layoutType\n * @property {(\"small\" | \"medium\" | \"large\" | \"max\")} layoutName\n * @property {string} layoutWidth\n *\n * @returns {layoutType}\n */\nfunction useLayout() {\n  const { layoutWidth, layoutName } = useContext(LayoutContext)\n  return {\n    layoutName,\n    layoutWidth,\n\n    // deprecated\n    name: layoutName,\n    width: layoutWidth,\n  }\n}\n\nfunction Layout({\n  breakpoints,\n  children,\n  paddingBottom,\n  parentWidth,\n  ...props\n}) {\n  const { width: viewportWidth } = useViewport()\n\n  const mergedBreakpoints = useMemo(\n    () => ({ ...BREAKPOINTS, ...breakpoints }),\n    [breakpoints]\n  )\n\n  // If the parent width is not passed, use the viewport width.\n  const [layoutName, layoutWidth] = useMemo(\n    () =>\n      getLayoutSize(\n        parentWidth === undefined ? viewportWidth : parentWidth,\n        mergedBreakpoints\n      ),\n    [viewportWidth, parentWidth, mergedBreakpoints]\n  )\n\n  return (\n    <LayoutContext.Provider value={{ layoutWidth, layoutName }}>\n      <div\n        {...props}\n        css={`\n          width: ${layoutName === 'small' ? 'auto' : `${layoutWidth}px`};\n          min-width: ${mergedBreakpoints.min}px;\n          margin: 0 auto;\n          padding-bottom: ${cssPx(paddingBottom)};\n        `}\n      >\n        {children}\n      </div>\n    </LayoutContext.Provider>\n  )\n}\n\nLayout.propTypes = {\n  breakpoints: PropTypes.shape({\n    min: PropTypes.number,\n    small: PropTypes.number,\n    medium: PropTypes.number,\n    large: PropTypes.number,\n  }),\n  children: PropTypes.node,\n  paddingBottom: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  parentWidth: PropTypes.number,\n}\n\nLayout.defaultProps = {\n  breakpoints: {},\n  paddingBottom: 3 * GU,\n}\n\n// Can be used to build an alternative Layout component\nLayout.__Context = LayoutContext\n\nexport default Layout\nexport { useLayout }\n"],"names":["getSizes","breakpoints","Object","entries","filter","name","sort","a","b","MIN_MARGIN","GU","getLayoutSize","parentWidth","sizes","index","length","LayoutContext","React","createContext","useLayout","layoutWidth","layoutName","useContext","width","Layout","children","paddingBottom","props","viewportWidth","useViewport","mergedBreakpoints","useMemo","BREAKPOINTS","undefined","min","cssPx","propTypes","PropTypes","shape","number","small","medium","large","node","oneOfType","string","defaultProps","__Context"],"mappings":"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"}