{"version":3,"file":"Redraw-78519803.js","sources":["../src/providers/Redraw/Redraw.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport getDisplayName from 'react-display-name'\n\n// Render prop component and HOC for re-rendering.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\nclass Redraw extends React.PureComponent {\n  static propTypes = {\n    interval: PropTypes.number,\n    children: PropTypes.func.isRequired,\n  }\n  static defaultProps = {\n    interval: 1000,\n  }\n  state = {\n    lastDraw: -1,\n  }\n  componentDidMount() {\n    this.raf = null\n    this.draw()\n  }\n  componentWillUnmount() {\n    this.raf && cancelAnimationFrame(this.raf)\n  }\n  draw = () => {\n    this.raf = requestAnimationFrame(this.draw)\n\n    const { interval } = this.props\n    const { lastDraw } = this.state\n    const now = Date.now()\n    const delta = now - lastDraw\n\n    if (lastDraw === -1 || delta > interval) {\n      this.setState({\n        lastDraw: Math.round(now / interval) * interval,\n      })\n    }\n  }\n  render() {\n    return this.props.children()\n  }\n}\n\nconst hocWrap = (Component, interval) => {\n  const HOC = props => (\n    <Redraw interval={interval}>{() => <Component {...props} />}</Redraw>\n  )\n  HOC.displayName = `Redraw(${getDisplayName(Component)})`\n  return HOC\n}\n\nRedraw.hocWrap = hocWrap\n\nexport { Redraw, hocWrap }\nexport default Redraw\n"],"names":["Redraw","React","PureComponent","_defineProperty","lastDraw","raf","requestAnimationFrame","draw","interval","props","state","now","Date","delta","setState","Math","round","componentDidMount","componentWillUnmount","cancelAnimationFrame","render","children","PropTypes","number","func","isRequired","hocWrap","Component","HOC","displayName","getDisplayName"],"mappings":";;;;;;;;;;;AAKA;AACA;;AAEA,MAAMA,MAAN,SAAqBC,yBAAK,CAACC,aAA3B,CAAyC;AAAA,EAAA,WAAA,GAAA;AAAA,IAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAAA;;AAAA,IAQ/BC,8BAAA,CAAA,IAAA,EAAA,OAAA,EAAA;AACNC,MAAAA,QAAQ,EAAE,CAAC,CAAA;AADL,KAR+B,CAAA,CAAA;;AAAA,IAAAD,8BAAA,CAAA,IAAA,EAAA,MAAA,EAkBhC,MAAM;AACX,MAAA,IAAA,CAAKE,GAAL,GAAWC,qBAAqB,CAAC,IAAA,CAAKC,IAAN,CAAhC,CAAA;AAEA,MAAM,MAAA;AAAEC,QAAAA,QAAAA;AAAF,OAAA,GAAe,KAAKC,KAA1B,CAAA;AACA,MAAM,MAAA;AAAEL,QAAAA,QAAAA;AAAF,OAAA,GAAe,KAAKM,KAA1B,CAAA;AACA,MAAA,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ,CAAA;AACA,MAAA,MAAME,KAAK,GAAGF,GAAG,GAAGP,QAApB,CAAA;;AAEA,MAAIA,IAAAA,QAAQ,KAAK,CAAC,CAAd,IAAmBS,KAAK,GAAGL,QAA/B,EAAyC;AACvC,QAAA,IAAA,CAAKM,QAAL,CAAc;AACZV,UAAAA,QAAQ,EAAEW,IAAI,CAACC,KAAL,CAAWL,GAAG,GAAGH,QAAjB,CAA6BA,GAAAA,QAAAA;AAD3B,SAAd,CAAA,CAAA;AAGD,OAAA;AACF,KA/BsC,CAAA,CAAA;AAAA,GAAA;;AAWvCS,EAAAA,iBAAiB,GAAG;AAClB,IAAKZ,IAAAA,CAAAA,GAAL,GAAW,IAAX,CAAA;AACA,IAAA,IAAA,CAAKE,IAAL,EAAA,CAAA;AACD,GAAA;;AACDW,EAAAA,oBAAoB,GAAG;AACrB,IAAA,IAAA,CAAKb,GAAL,IAAYc,oBAAoB,CAAC,IAAA,CAAKd,GAAN,CAAhC,CAAA;AACD,GAAA;;AAeDe,EAAAA,MAAM,GAAG;AACP,IAAA,OAAO,IAAKX,CAAAA,KAAL,CAAWY,QAAX,EAAP,CAAA;AACD,GAAA;;AAlCsC,CAAA;;AAAnCrB,8BAAAA,CAAAA,QACe,WAAA,EAAA;AACjBQ,EAAAA,QAAQ,EAAEc,eAAS,CAACC,MADH;AAEjBF,EAAAA,QAAQ,EAAEC,eAAS,CAACE,IAAV,CAAeC,UAAAA;AAFR;;AADfzB,8BAAAA,CAAAA,QAKkB,cAAA,EAAA;AACpBQ,EAAAA,QAAQ,EAAE,IAAA;AADU;;AAgCxB,MAAMkB,OAAO,GAAG,CAACC,SAAD,EAAYnB,QAAZ,KAAyB;AACvC,EAAA,MAAMoB,GAAG,GAAGnB,KAAK,iBACfR,wCAAC,MAAD,EAAA;AAAQ,IAAA,QAAQ,EAAEO,QAAAA;AAAlB,GAAA,EAA6B,mBAAMP,yBAAC,CAAA,aAAA,CAAA,SAAD,EAAeQ,KAAf,CAAnC,CADF,CAAA;;AAGAmB,EAAAA,GAAG,CAACC,WAAJ,GAAmB,UAASC,uBAAc,CAACH,SAAD,CAAY,CAAtD,CAAA,CAAA,CAAA;AACA,EAAA,OAAOC,GAAP,CAAA;AACD,CAND,CAAA;;AAQA5B,MAAM,CAAC0B,OAAP,GAAiBA,OAAjB;;;;"}