{"version":3,"file":"Checkbox.js","sources":["../src/components/Input/Checkbox.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Spring, animated } from '@react-spring/web'\nimport { useTheme } from '../../theme'\nimport { noop } from '../../utils'\nimport { springs, GU, RADIUS } from '../../style'\nimport FocusVisible from '../FocusVisible/FocusVisible'\n\nconst SIZE = 18\nconst CHECKBOX_RADIUS = 2\nconst RADIO_BULLET_SIZE = 10\n\nclass Checkbox extends React.PureComponent {\n  static propTypes = {\n    checked: PropTypes.bool,\n    disabled: PropTypes.bool,\n    indeterminate: PropTypes.bool,\n    onChange: PropTypes.func,\n    tabIndex: PropTypes.string,\n    theme: PropTypes.object,\n    variant: PropTypes.oneOf(['checkbox', 'radio']),\n  }\n  static defaultProps = {\n    checked: false,\n    disabled: false,\n    indeterminate: false,\n    onChange: noop,\n    tabIndex: '0',\n    variant: 'checkbox',\n  }\n  _element = React.createRef()\n  getAriaChecked() {\n    const { checked, indeterminate } = this.props\n    if (indeterminate) return 'mixed'\n    if (checked) return 'true'\n    return 'false'\n  }\n  handleClick = () => {\n    const { onChange, checked, indeterminate } = this.props\n    onChange(indeterminate ? false : !checked)\n  }\n  focus = () => {\n    this._element.current.focus()\n  }\n  renderCheck(visible, Icon) {\n    const { disabled, theme } = this.props\n    return (\n      <Spring\n        from={{ progress: 0 }}\n        to={{ progress: Number(visible) }}\n        config={springs.instant}\n        native\n      >\n        {({ progress }) => (\n          <animated.span\n            css={`\n              position: absolute;\n              top: 0;\n              left: 0;\n              right: 0;\n              bottom: 0;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              transform-origin: 50% 50%;\n            `}\n            style={{\n              opacity: progress,\n              transform: progress.to(v => `scale(${v})`),\n            }}\n          >\n            <Icon color={disabled ? theme.selectedDisabled : theme.selected} />\n          </animated.span>\n        )}\n      </Spring>\n    )\n  }\n  render() {\n    const {\n      checked,\n      disabled,\n      indeterminate,\n      tabIndex,\n      theme,\n      variant,\n      ...props\n    } = this.props\n    return (\n      <FocusVisible>\n        {({ focusVisible, onFocus }) => (\n          <button\n            type=\"button\"\n            ref={this._element}\n            role={variant}\n            tabIndex={tabIndex}\n            aria-checked={this.getAriaChecked()}\n            onClick={this.handleClick}\n            onFocus={onFocus}\n            disabled={disabled}\n            css={`\n              display: inline-flex;\n              position: relative;\n              width: ${SIZE}px;\n              height: ${SIZE}px;\n              margin: ${0.5 * GU}px;\n              padding: 0;\n              background: ${disabled ? theme.controlDisabled : theme.control};\n              border: 1px solid ${theme.controlBorder};\n              border-radius: ${variant === 'radio'\n                ? '50%'\n                : `${CHECKBOX_RADIUS}px`};\n              outline: 0;\n              &::-moz-focus-inner {\n                border: 0;\n              }\n\n              ${!disabled\n                ? `\n                    cursor: pointer;\n                    &:active {\n                      border-color: ${theme.controlBorderPressed};\n                    }\n                    &:focus .focus-ring {\n                      display: ${focusVisible ? 'block' : 'none'};\n                    }\n                  `\n                : ''};\n            `}\n            {...props}\n          >\n            {variant === 'checkbox' &&\n              this.renderCheck(checked && !indeterminate, Check)}\n            {variant === 'checkbox' && this.renderCheck(indeterminate, Dash)}\n            {variant === 'radio' && this.renderCheck(checked, Bullet)}\n\n            <span\n              className=\"focus-ring\"\n              css={`\n                position: absolute;\n                top: -2px;\n                left: -2px;\n                right: -2px;\n                bottom: -2px;\n                border: 2px solid ${theme.focus};\n                border-radius: ${variant === 'radio' ? '50%' : `${RADIUS}px`};\n                display: none;\n              `}\n            />\n          </button>\n        )}\n      </FocusVisible>\n    )\n  }\n}\n\n/* eslint-disable react/prop-types */\n\nconst Dash = ({ color }) => (\n  /* Use SVG to have subpixels (strokeWidth=\"1.5\") on Chrome */\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\">\n    <line x1=\"3\" y1=\"7\" x2=\"11\" y2=\"7\" stroke={color} strokeWidth=\"1.5\" />\n  </svg>\n)\n\nconst Check = ({ color }) => (\n  <svg width=\"12\" height=\"8\" viewBox=\"0 0 12 8\">\n    <path\n      d={`\n        M11.059 1.393\n        L4.335  7.395\n        L0.944  3.260\n        L2.104  2.309\n        L4.503  5.234\n        L10.060 0.274\n        L11.059 1.393\n        Z\n      `}\n      fill={color}\n    />\n  </svg>\n)\n\nconst Bullet = ({ color }) => (\n  <span\n    css={`\n      display: block;\n      width: ${RADIO_BULLET_SIZE}px;\n      height: ${RADIO_BULLET_SIZE}px;\n      border-radius: 50%;\n      background: ${color};\n    `}\n  />\n)\n\nconst CheckBoxWithTheme = React.forwardRef((props, ref) => {\n  const theme = useTheme()\n  return <Checkbox theme={theme} ref={ref} {...props} />\n})\n\n/* eslint-enable react/prop-types */\n\nexport default CheckBoxWithTheme\n"],"names":["SIZE","CHECKBOX_RADIUS","RADIO_BULLET_SIZE","Checkbox","React","PureComponent","createRef","_defineProperty","onChange","checked","indeterminate","props","_element","current","focus","getAriaChecked","renderCheck","visible","Icon","disabled","theme","Spring","progress","Number","springs","instant","opacity","transform","to","v","selectedDisabled","selected","render","tabIndex","variant","FocusVisible","focusVisible","onFocus","_extends","handleClick","GU","controlDisabled","control","controlBorder","controlBorderPressed","Check","Dash","Bullet","RADIUS","PropTypes","bool","func","string","object","oneOf","noop","color","CheckBoxWithTheme","forwardRef","ref","useTheme"],"mappings":"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"}