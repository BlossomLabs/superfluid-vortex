{"version":3,"file":"Tag.js","sources":["../src/components/Tag/Tag.js"],"sourcesContent":["import React, { useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { useTheme } from '../../theme'\nimport { GU, textStyle } from '../../style'\nimport { unselectable } from '../../utils'\n\nconst MODE_INDICATOR = 'indicator'\nconst MODE_IDENTIFIER = 'identifier'\nconst MODE_NEW = 'new'\nconst MODE_ACTIVITY = 'activity'\n\nconst SIZE_NORMAL = 'normal'\nconst SIZE_SMALL = 'small'\n\nconst COUNT_DEFAULT = 2\n\nfunction useMode(mode) {\n  const theme = useTheme()\n\n  if (mode === MODE_IDENTIFIER) {\n    return {\n      background: theme.tagIdentifier,\n      color: theme.tagIdentifierContent,\n      size: SIZE_NORMAL,\n    }\n  }\n\n  if (mode === MODE_NEW) {\n    return {\n      background: theme.tagNew,\n      color: theme.tagNewContent,\n      size: SIZE_NORMAL,\n    }\n  }\n\n  if (mode === MODE_ACTIVITY) {\n    return {\n      background: theme.tagActivity,\n      color: theme.tagActivityContent,\n      size: SIZE_SMALL,\n    }\n  }\n\n  // mode === MODE_INDICATOR (default)\n  return {\n    background: theme.tagIndicator,\n    color: theme.tagIndicatorContent,\n    size: SIZE_NORMAL,\n  }\n}\n\nfunction getSize(size, { uppercase, discMode, iconAndLabel }) {\n  if (size === SIZE_SMALL) {\n    return `\n      min-width: ${2 * GU}px;\n      width: ${discMode ? `${2 * GU}px` : 'auto'};\n      height: ${2 * GU}px;\n      padding: ${discMode ? '0' : `0 ${0.5 * GU}px`};\n      padding-top: ${uppercase ? '0.5px' : 0};\n      border-radius: ${2 * GU}px;\n      ${textStyle('label3')};\n      font-weight: 600;\n    `\n  }\n\n  // normal\n  return `\n    min-width: ${2.5 * GU}px;\n    width: ${discMode ? `${3 * GU}px` : 'auto'};\n    height: ${2.5 * GU}px;\n    padding: ${discMode ? '0' : `0 ${1.5 * GU}px`} ;\n    padding-top: ${uppercase ? '1px' : 0};\n    ${iconAndLabel ? `padding-left: ${1.25 * GU}px` : ''};\n    border-radius: ${2.5 * GU}px;\n    ${textStyle('label2')};\n    font-weight: 600;\n  `\n}\n\nfunction useLabel({ label = '', limitDigits }) {\n  const finalLabel = useMemo(() => {\n    if (limitDigits === false) {\n      return typeof label === 'number' ? String(label) : label || ''\n    }\n\n    const digits = typeof limitDigits === 'number' ? limitDigits : COUNT_DEFAULT\n    const parsed = parseInt(label, 10)\n\n    if (isNaN(parsed)) {\n      return label || ''\n    }\n\n    const max = Math.pow(10, digits) - 1\n    const formattedValue = parsed > max ? `${max}+` : parsed\n\n    return String(formattedValue)\n  }, [label, limitDigits])\n\n  return finalLabel\n}\n\nfunction Tag({\n  background,\n  children,\n  color,\n  limitDigits,\n  icon,\n  label,\n  mode,\n  size,\n  uppercase,\n  ...props\n}) {\n  if ((icon || label !== undefined) && children !== undefined) {\n    throw new Error('Tag: you cannot use icon or label with children.')\n  }\n\n  const modeProps = useMode(mode)\n\n  const finalSize = size || modeProps.size\n  const finalLabel = useLabel({\n    label: label !== undefined ? label : children,\n    limitDigits,\n  })\n\n  const sizeStyles = getSize(finalSize, {\n    uppercase,\n    discMode:\n      // icon only\n      (icon && !finalLabel) ||\n      // label only, using 1 or 0 chars\n      (!icon && typeof finalLabel === 'string' && finalLabel.length < 2),\n    iconAndLabel: icon && finalLabel,\n  })\n\n  // Slightly tweak the alignment when there are no descenders,\n  // to make the characters look more aligned.\n  const alignmentCorrection =\n    finalSize === SIZE_NORMAL &&\n    (uppercase || typeof label === 'number' || limitDigits !== false)\n\n  return (\n    <span\n      css={`\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        white-space: nowrap;\n        ${sizeStyles};\n        ${!uppercase ? 'text-transform: unset' : ''};\n        color: ${color || modeProps.color};\n        background: ${background || modeProps.background};\n        ${unselectable};\n      `}\n      {...props}\n    >\n      {icon && (\n        <span\n          css={`\n            display: flex;\n            align-items: center;\n            margin-right: ${finalLabel ? 0.25 * GU : 0}px;\n          `}\n        >\n          {icon}\n        </span>\n      )}\n      <span\n        css={`\n          overflow: hidden;\n          text-overflow: ellipsis;\n          margin-top: ${alignmentCorrection ? '1px' : '0'};\n        `}\n      >\n        {finalLabel}\n      </span>\n    </span>\n  )\n}\n\nTag.propTypes = {\n  background: PropTypes.string,\n  children: PropTypes.node,\n  color: PropTypes.string,\n  limitDigits: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  icon: PropTypes.node,\n  label: PropTypes.oneOfType([PropTypes.node, PropTypes.number]),\n  mode: PropTypes.oneOf([\n    MODE_IDENTIFIER,\n    MODE_NEW,\n    MODE_INDICATOR,\n    MODE_ACTIVITY,\n  ]),\n  size: PropTypes.oneOf([SIZE_NORMAL, SIZE_SMALL]),\n  uppercase: PropTypes.bool,\n}\n\nTag.defaultProps = {\n  uppercase: true,\n  limitDigits: false,\n}\n\nexport default Tag\n"],"names":["MODE_INDICATOR","MODE_IDENTIFIER","MODE_NEW","MODE_ACTIVITY","SIZE_NORMAL","SIZE_SMALL","COUNT_DEFAULT","useMode","mode","theme","useTheme","background","tagIdentifier","color","tagIdentifierContent","size","tagNew","tagNewContent","tagActivity","tagActivityContent","tagIndicator","tagIndicatorContent","getSize","uppercase","discMode","iconAndLabel","GU","textStyle","useLabel","label","limitDigits","finalLabel","useMemo","String","digits","parsed","parseInt","isNaN","max","Math","pow","formattedValue","Tag","children","icon","props","undefined","Error","modeProps","finalSize","sizeStyles","length","alignmentCorrection","React","propTypes","PropTypes","string","node","oneOfType","bool","number","oneOf","defaultProps","unselectable"],"mappings":"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"}