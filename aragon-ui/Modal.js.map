{"version":3,"file":"Modal.js","sources":["../src/components/Modal/Modal.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition, animated } from '@react-spring/web'\nimport { cssPx, noop } from '../../utils'\nimport { springs, GU, BIG_RADIUS } from '../../style'\nimport { useTheme } from '../../theme'\nimport { useViewport } from '../../providers/Viewport'\nimport { IconCross } from '../../icons'\nimport ButtonIcon from '../Button/ButtonIcon'\nimport EscapeOutside from '../EscapeOutside/EscapeOutside'\nimport RootPortal from '../RootPortal/RootPortal'\n\nconst SPACE_AROUND = 4 * GU\n\nfunction Modal({\n  children = undefined,\n  onClose = () => {},\n  onClosed = () => {},\n  padding = undefined,\n  visible = undefined,\n  width = undefined,\n  closeButton = undefined,\n  ...props\n}) {\n  const theme = useTheme()\n  const viewport = useViewport()\n\n  return (\n    <RootPortal>\n      <Transition\n        native\n        items={visible}\n        from={{ opacity: 0, scale: 0.98 }}\n        enter={{ opacity: 1, scale: 1 }}\n        leave={{ opacity: 0, scale: 0.98 }}\n        config={{ ...springs.smooth, precision: 0.001 }}\n        onDestroyed={destroyed => {\n          destroyed && onClosed()\n        }}\n      >\n        {({ opacity, scale }, item) =>\n          item && (\n            <animated.div\n              css={`\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: ${theme.overlay.alpha(0.9)};\n              `}\n              style={{ opacity }}\n              {...props}\n            >\n              <animated.div\n                css={`\n                  position: absolute;\n                  z-index: 1;\n                  top: 0;\n                  left: 0;\n                  right: 0;\n                  bottom: 0;\n                  display: grid;\n                  align-items: center;\n                  justify-content: center;\n                  overflow: auto;\n                `}\n                style={{\n                  pointerEvents: visible ? 'auto' : 'none',\n                  transform: scale.to(v => `scale3d(${v}, ${v}, 1)`),\n                }}\n              >\n                <div\n                  css={`\n                    padding: ${SPACE_AROUND}px 0;\n                  `}\n                >\n                  <EscapeOutside\n                    role=\"alertdialog\"\n                    useCapture\n                    background={theme.surface}\n                    onEscapeOutside={onClose}\n                    css={`\n                      position: relative;\n                      overflow: hidden;\n                      min-width: ${360 - SPACE_AROUND * 2}px;\n                      background: ${theme.surface};\n                      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.15);\n                    `}\n                    style={{\n                      width: cssPx(\n                        typeof width === 'function' ? width(viewport) : width\n                      ),\n                      borderRadius: `${BIG_RADIUS}px`,\n                    }}\n                  >\n                    {closeButton && (\n                      <ButtonIcon\n                        label=\"Close\"\n                        onClick={onClose}\n                        css={`\n                          position: absolute;\n                          z-index: 2;\n                          top: ${2 * GU}px;\n                          right: ${2 * GU}px;\n                        `}\n                      >\n                        <IconCross />\n                      </ButtonIcon>\n                    )}\n                    <div\n                      style={{\n                        padding: cssPx(\n                          typeof padding === 'function'\n                            ? padding(viewport)\n                            : padding\n                        ),\n                      }}\n                      css={`\n                        position: relative;\n                        z-index: 1;\n                      `}\n                    >\n                      {children}\n                    </div>\n                  </EscapeOutside>\n                </div>\n              </animated.div>\n            </animated.div>\n          )\n        }\n      </Transition>\n    </RootPortal>\n  )\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  closeButton: PropTypes.bool,\n  onClose: PropTypes.func,\n  onClosed: PropTypes.func,\n  padding: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.number,\n    PropTypes.string,\n  ]),\n  visible: PropTypes.bool.isRequired,\n  width: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.number,\n    PropTypes.string,\n  ]),\n}\n\nModal.defaultProps = {\n  closeButton: true,\n  onClose: noop,\n  onClosed: noop,\n  padding: 3 * GU,\n  width: viewport => Math.min(viewport.width - SPACE_AROUND * 2, 600),\n}\n\nexport default Modal\n"],"names":["SPACE_AROUND","GU","Modal","children","undefined","onClose","onClosed","padding","visible","width","closeButton","props","theme","useTheme","viewport","useViewport","React","RootPortal","Transition","opacity","scale","springs","smooth","precision","destroyed","item","_extends","overlay","alpha","pointerEvents","transform","to","v","surface","cssPx","borderRadius","BIG_RADIUS","IconCross","propTypes","PropTypes","node","isRequired","bool","func","oneOfType","number","string","defaultProps","noop","Math","min"],"mappings":"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"}