{"version":3,"file":"EscapeOutside.js","sources":["../../../../../src/components/EscapeOutside/EscapeOutside.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { noop, KEY_ESC } from '../../utils'\n\nclass EscapeOutside extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onEscapeOutside: PropTypes.func.isRequired,\n    useCapture: PropTypes.bool,\n  }\n\n  static defaultProps = {\n    onEscapeOutside: noop,\n    useCapture: false,\n  }\n\n  _element = React.createRef()\n  _document = null\n\n  componentDidMount() {\n    const { useCapture } = this.props\n    this._document = this._element.ownerDocument\n    this._document.addEventListener('keydown', this.handleEscape, useCapture)\n    this._document.addEventListener('mousedown', this.handleClick, useCapture)\n    this._document.addEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  componentWillUnmount() {\n    const { useCapture } = this.props\n    this._document.removeEventListener('keydown', this.handleEscape, useCapture)\n    this._document.removeEventListener(\n      'mousedown',\n      this.handleClick,\n      useCapture\n    )\n    this._document.removeEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  handleClick = e => {\n    const { onEscapeOutside } = this.props\n    if (!this._element.contains(e.target)) {\n      onEscapeOutside()\n    }\n  }\n\n  handleEscape = e => {\n    const { onEscapeOutside } = this.props\n    if (e.keyCode === KEY_ESC) {\n      onEscapeOutside()\n    }\n  }\n\n  render() {\n    const { children, onEscapeOutside, useCapture, ...rest } = this.props\n\n    return (\n      <div {...rest} ref={n => (this._element = n)}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default EscapeOutside\n"],"names":["EscapeOutside","React","Component","createRef","e","onEscapeOutside","props","_element","contains","target","keyCode","KEY_ESC","componentDidMount","useCapture","_document","ownerDocument","addEventListener","handleEscape","handleClick","componentWillUnmount","removeEventListener","render","children","rest","n","PropTypes","node","isRequired","func","bool","noop"],"mappings":"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"}