{"version":3,"file":"DatePicker.js","sources":["../../../../../src/components/DateRangePicker/DatePicker.js"],"sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport dayjs from 'dayjs'\nimport { GU } from '../../style'\nimport { eachDayOfInterval } from '../../utils'\nimport { Selector } from './components'\nimport MonthDay from './MonthDay'\n\nfunction DatePicker({\n  initialDate,\n  onSelect,\n  datesRangeStart,\n  datesRangeEnd,\n  hideYearSelector,\n  yearFormat,\n  hideMonthSelector,\n  monthFormat,\n  monthYearFormat,\n  hideWeekDays,\n  weekDayFormat,\n  ...props\n}) {\n  const [selectedDate, setSelectedDate] = useState(initialDate)\n\n  const setDate = ({ year, add }) => event => {\n    setSelectedDate(\n      dayjs(selectedDate)\n        .startOf('month')\n        [add ? 'add' : 'subtract'](1, year ? 'year' : 'month')\n        .toDate()\n    )\n  }\n\n  const today = dayjs()\n    .startOf('day')\n    .toDate()\n\n  const selectedDayjs = dayjs(selectedDate || today)\n\n  const isSelected = day => {\n    if (datesRangeStart || datesRangeEnd) {\n      return (\n        day.isSame(datesRangeStart, 'day') || day.isSame(datesRangeEnd, 'day')\n      )\n    }\n    return false\n  }\n\n  const isInRange = day => {\n    if (datesRangeStart && datesRangeEnd) {\n      return day.isAfter(datesRangeStart) && day.isBefore(datesRangeEnd)\n    }\n  }\n\n  return (\n    <div\n      css={`\n        display: grid;\n      `}\n      {...props}\n    >\n      {!hideYearSelector && (\n        <Selector\n          prev={setDate({ year: true, add: false })}\n          next={setDate({ year: true, add: true })}\n          small\n        >\n          {selectedDayjs.format(yearFormat)}\n        </Selector>\n      )}\n\n      {!hideMonthSelector && (\n        <Selector\n          prev={setDate({ year: false, add: false })}\n          next={setDate({ year: false, add: true })}\n        >\n          {selectedDayjs.format(\n            !hideYearSelector ? monthFormat : monthYearFormat\n          )}\n        </Selector>\n      )}\n\n      <div\n        css={`\n          display: grid;\n          grid-template: auto / repeat(7, 1fr);\n          width: ${31.5 * GU}px;\n        `}\n      >\n        {!hideWeekDays &&\n          eachDayOfInterval({\n            start: selectedDayjs.startOf('week'),\n            end: selectedDayjs.endOf('week'),\n          }).map(day => {\n            const dayJs = dayjs(day)\n            return (\n              <MonthDay key={dayJs.format('dd')} weekDay>\n                {dayJs.format(weekDayFormat)}\n              </MonthDay>\n            )\n          })}\n\n        {eachDayOfInterval({\n          start: selectedDayjs.startOf('month').startOf('week'),\n          end: selectedDayjs.endOf('month').endOf('week'),\n        }).map(day => {\n          const dayJs = dayjs(day)\n          return (\n            <MonthDay\n              key={dayJs.valueOf()}\n              disabled={!selectedDayjs.isSame(dayJs, 'month')}\n              selected={isSelected(dayJs)}\n              inRange={isInRange(dayJs)}\n              rangeBoundaryBegin={\n                datesRangeStart &&\n                datesRangeEnd &&\n                dayJs.isSame(datesRangeStart, 'day')\n              }\n              rangeBoundaryEnd={\n                datesRangeStart &&\n                datesRangeEnd &&\n                dayJs.isSame(datesRangeEnd, 'day')\n              }\n              today={dayJs.isSame(today, 'day')}\n              onClick={() => onSelect(dayJs.toDate())}\n            >\n              {dayJs.format(props.dayFormat)}\n            </MonthDay>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nDatePicker.propTypes = {\n  /**\n   * For displaying a selected dates range - start\n   */\n  datesRangeStart: PropTypes.instanceOf(Date),\n  /**\n   * For displaying a selected dates range - end\n   */\n  datesRangeEnd: PropTypes.instanceOf(Date),\n  /**\n   * Initial date - calendar will start from here.\n   */\n  initialDate: PropTypes.instanceOf(Date),\n\n  // Events\n  onSelect: PropTypes.func,\n\n  // Visibility\n  hideMonthSelector: PropTypes.bool,\n  hideWeekDays: PropTypes.bool,\n  hideYearSelector: PropTypes.bool,\n\n  // Formatting\n  dayFormat: PropTypes.string,\n  monthFormat: PropTypes.string,\n  monthYearFormat: PropTypes.string,\n  weekDayFormat: PropTypes.string,\n  yearFormat: PropTypes.string,\n}\n\nDatePicker.defaultProps = {\n  onSelect: () => {},\n  dayFormat: 'D',\n  monthFormat: 'MMMM',\n  monthYearFormat: 'MMMM YYYY',\n  weekDayFormat: 'ddd',\n  yearFormat: 'YYYY',\n}\n\nexport default DatePicker\n"],"names":["DatePicker","initialDate","onSelect","datesRangeStart","datesRangeEnd","hideYearSelector","yearFormat","hideMonthSelector","monthFormat","monthYearFormat","hideWeekDays","weekDayFormat","props","selectedDate","setSelectedDate","useState","setDate","year","add","event","dayjs","startOf","toDate","today","selectedDayjs","isSelected","day","isSame","isInRange","isAfter","isBefore","React","format","GU","eachDayOfInterval","start","end","endOf","map","dayJs","MonthDay","valueOf","dayFormat","propTypes","PropTypes","instanceOf","Date","func","bool","string","defaultProps"],"mappings":"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"}