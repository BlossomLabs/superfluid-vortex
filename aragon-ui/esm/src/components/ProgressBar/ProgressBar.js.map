{"version":3,"file":"ProgressBar.js","sources":["../../../../../src/components/ProgressBar/ProgressBar.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from '../../proptypes'\nimport styled, { keyframes } from 'styled-components'\nimport { useSpring, animated, to } from '@react-spring/web'\nimport { springs } from '../../style'\nimport { useTheme } from '../../theme'\nimport { warnOnce } from '../../utils/environment'\n\nconst RADIUS = 2\nconst BAR_HEIGHT = 6\n\nconst INDETERMINATE_WIDTH = 1 / 4\nconst INDETERMINATE_DURATION = 1600\n\nconst indeterminateAnim = keyframes`\n  // x positions use -1px to anticipate any rounding issues\n  0% {\n    transform: translate3d(calc(-100% - 1px), 0, 0);\n  }\n  70%, 100% {\n    transform: translate3d(calc(${100 / INDETERMINATE_WIDTH}% + 1px), 0, 0);\n  }\n`\n\nconst ProgressBar = React.memo(({ animate, color, progress, value }) => {\n  // Support `progress` for a while but warn if being used.\n  if (value === -1 && typeof progress === 'number') {\n    value = progress\n\n    warnOnce(\n      'ProgressBar:progress',\n      'The `progress` prop of ProgressBar is deprecated: please use `value` instead.'\n    )\n  }\n\n  // The indeterminate state can be triggered either by not setting the value\n  // (to mimic the <progress> element in HTML), or by setting the -1 value (for\n  // convenience in React).\n  const indeterminate = value === -1\n\n  const theme = useTheme()\n  const currentColor = color === undefined ? theme.accent : color\n\n  const transition = useSpring({\n    reset: false,\n    config: { ...springs.smooth, precision: 0.001 },\n    from: { scale: 0, x: 0 },\n    to: { scale: value, x: 0 },\n    immediate: !animate,\n  })\n\n  return (\n    <div\n      css={`\n        width: 100%;\n        height: ${BAR_HEIGHT}px;\n        background: ${theme.surfaceUnder};\n        border-radius: ${RADIUS}px;\n        overflow: hidden;\n      `}\n    >\n      <Bar\n        style={{\n          width: `${(indeterminate ? INDETERMINATE_WIDTH : 1) * 100}%`,\n          background: currentColor,\n          borderRadius: `${indeterminate ? RADIUS : 0}px`,\n          animationName: `${indeterminate ? indeterminateAnim.name : 'none'}`,\n          transform: to(\n            [transition.x, transition.scale],\n            (x, s) => `translate3d(${x * 100}%, 0, 0) scale3d(${s}, 1, 1)`\n          ),\n        }}\n      />\n    </div>\n  )\n})\n\nconst Bar = styled(animated.div)`\n  width: 100%;\n  height: ${BAR_HEIGHT}px;\n  transform-origin: 0 0;\n\n  // this need to be defined here rather than as a style property, so that\n  // styled can inject the @keyframes (on demand since styled@v4).\n  animation: ${indeterminateAnim} ${INDETERMINATE_DURATION}ms ease-in-out\n    infinite;\n  animation-name: none;\n`\n\nProgressBar.defaultProps = {\n  animate: true,\n  value: -1,\n}\n\nProgressBar.propTypes = {\n  animate: PropTypes.bool,\n  color: PropTypes.string,\n  progress: PropTypes._0to1,\n  value: PropTypes.oneOfType([PropTypes._0to1, PropTypes.oneOf([-1])]),\n}\n\nexport default ProgressBar\n"],"names":["RADIUS","BAR_HEIGHT","INDETERMINATE_WIDTH","INDETERMINATE_DURATION","indeterminateAnim","keyframes","ProgressBar","React","memo","animate","color","progress","value","warnOnce","indeterminate","theme","useTheme","currentColor","undefined","accent","transition","useSpring","reset","config","springs","smooth","precision","from","scale","x","to","immediate","surfaceUnder","width","background","borderRadius","animationName","name","transform","s","Bar","styled","animated","div","defaultProps","propTypes","PropTypes","bool","string","_0to1","oneOfType","oneOf"],"mappings":"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"}