{"version":3,"file":"Distribution.js","sources":["../../../../../src/components/Distribution/Distribution.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useTheme } from '../../theme'\nimport { GU, textStyle } from '../../style'\n\nfunction Distribution({\n  colors,\n  showLegend,\n  heading,\n  itemTitle,\n  renderLegendItem: LegendItem,\n  renderFullLegendItem: FullLegendItem,\n  items,\n}) {\n  const theme = useTheme()\n\n  if (!colors) {\n    colors = [\n      theme.blue,\n      theme.red,\n      theme.brown,\n      theme.yellow,\n      theme.purple,\n      theme.green,\n    ]\n  }\n\n  const total = items.reduce((total, { percentage }) => total + percentage, 0)\n\n  // Sort by percentage\n  items = items.sort((a, b) => b.percentage - a.percentage)\n\n  return (\n    <section>\n      {heading && (\n        <div\n          css={`\n            margin-bottom: ${1 * GU}px;\n          `}\n        >\n          {typeof heading === 'string' ? (\n            <h1 css={textStyle('body2')}>{heading}</h1>\n          ) : (\n            heading\n          )}\n        </div>\n      )}\n      <div\n        css={`\n          display: flex;\n          width: 100%;\n          overflow: hidden;\n          margin: 0 0 ${1 * GU}px;\n          border-radius: 3px;\n          div {\n            height: 6px;\n          }\n        `}\n      >\n        {items.map(({ item, percentage }, index) => (\n          <div\n            key={index}\n            title={itemTitle({ item, percentage, index })}\n            style={{\n              width: `${(percentage / total) * 100}%`,\n              background: colors[index % colors.length],\n            }}\n          />\n        ))}\n      </div>\n      {showLegend && (\n        <ul\n          css={`\n            margin-top: ${3 * GU}px;\n          `}\n        >\n          {items.map(({ item, percentage }, index) => {\n            const color = colors[index % colors.length]\n            return (\n              <li\n                key={index}\n                css={`\n                  display: flex;\n                  align-items: center;\n                  justify-content: space-between;\n                  margin-top: 10px;\n                  list-style: none;\n                `}\n              >\n                {FullLegendItem ? (\n                  <FullLegendItem\n                    bullet={<Bullet color={color} />}\n                    color={color}\n                    index={index}\n                    item={item}\n                    percentage={percentage}\n                  />\n                ) : (\n                  <React.Fragment>\n                    <div\n                      css={`\n                        display: flex;\n                        align-items: center;\n                        flex-shrink: 1;\n                        flex-grow: 1;\n                      `}\n                    >\n                      <Bullet color={color} />\n                      <div\n                        css={`\n                          width: 0;\n                          flex-shrink: 1;\n                          flex-grow: 1;\n                          text-overflow: ellipsis;\n                          overflow: hidden;\n                          white-space: nowrap;\n                        `}\n                      >\n                        <LegendItem\n                          color={color}\n                          index={index}\n                          item={item}\n                          percentage={percentage}\n                        />\n                      </div>\n                    </div>\n                    <div\n                      css={`\n                        padding-left: ${1 * GU}px;\n                        flex-shrink: 0;\n                      `}\n                    >\n                      <strong>{percentage}%</strong>\n                    </div>\n                  </React.Fragment>\n                )}\n              </li>\n            )\n          })}\n        </ul>\n      )}\n    </section>\n  )\n}\n\nDistribution.propTypes = {\n  colors: PropTypes.array,\n  heading: PropTypes.node,\n  itemTitle: PropTypes.func,\n  renderLegendItem: PropTypes.func,\n  renderFullLegendItem: PropTypes.func,\n  showLegend: PropTypes.bool,\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      item: PropTypes.any.isRequired,\n      percentage: PropTypes.number.isRequired,\n    })\n  ).isRequired,\n}\n\nDistribution.defaultProps = {\n  heading: null,\n  itemTitle: ({ item, percentage, index }) => {\n    return `${\n      typeof item === 'string' ? item : `Item ${index + 1}`\n    }: ${percentage}%`\n  },\n  renderLegendItem: ({ item, percentage, index }) => {\n    return typeof item === 'string' ? item : `Item ${index + 1}`\n  },\n  showLegend: true,\n}\n\n/* eslint-disable react/prop-types */\nfunction Bullet({ color }) {\n  return (\n    <div\n      css={`\n        width: ${1 * GU}px;\n        height: ${1 * GU}px;\n        margin-right: ${1 * GU}px;\n        border-radius: 50%;\n        flex-shrink: 0;\n      `}\n      style={{ background: color }}\n    />\n  )\n}\n/* eslint-enable react/prop-types */\n\nexport default Distribution\n"],"names":["Distribution","colors","showLegend","heading","itemTitle","renderLegendItem","LegendItem","renderFullLegendItem","FullLegendItem","items","theme","useTheme","blue","red","brown","yellow","purple","green","total","reduce","percentage","sort","a","b","React","GU","textStyle","map","index","item","width","background","length","color","propTypes","PropTypes","array","node","func","bool","arrayOf","shape","any","isRequired","number","defaultProps","Bullet"],"mappings":"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"}