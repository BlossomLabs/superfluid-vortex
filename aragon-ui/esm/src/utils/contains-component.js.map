{"version":3,"file":"contains-component.js","sources":["../../../../src/utils/contains-component.js"],"sourcesContent":["import React, { useContext, useEffect, useMemo, useState } from 'react'\n\nfunction initContainsComponent() {\n  const ContainsContext = React.createContext({ contains: false })\n\n  return {\n    // Wrap the parent component with this provider.\n    /* eslint-disable react/prop-types */\n    Provider({ children }) {\n      const [count, setCount] = useState(0)\n\n      const contextValue = useMemo(() => {\n        return {\n          updateCount(diff) {\n            setCount(count => count + diff)\n          },\n          contains: count > 0,\n        }\n      }, [count])\n\n      return (\n        <ContainsContext.Provider value={contextValue}>\n          {children}\n        </ContainsContext.Provider>\n      )\n    },\n    /* eslint-enable react/prop-types */\n\n    // Call this from the parent component (returns a boolean)\n    useContains() {\n      return useContext(ContainsContext).contains\n    },\n\n    // Call this from the child component\n    useRegister() {\n      const { updateCount } = useContext(ContainsContext)\n\n      useEffect(() => {\n        if (!updateCount) {\n          return\n        }\n        updateCount(1)\n        return () => {\n          updateCount(-1)\n        }\n        // We don't want this effect to ever re-run\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [])\n    },\n  }\n}\n\nexport { initContainsComponent }\n"],"names":["initContainsComponent","ContainsContext","React","createContext","contains","Provider","children","count","setCount","useState","contextValue","useMemo","updateCount","diff","useContains","useContext","useRegister","useEffect"],"mappings":";;AAEA,SAASA,qBAAT,GAAiC;AAC/B,EAAA,MAAMC,eAAe,gBAAGC,cAAK,CAACC,aAAN,CAAoB;AAAEC,IAAAA,QAAQ,EAAE,KAAA;AAAZ,GAApB,CAAxB,CAAA;AAEA,EAAO,OAAA;AACL;;AACA;AACAC,IAAAA,QAAQ,CAAe,IAAA,EAAA;AAAA,MAAd,IAAA;AAAEC,QAAAA,QAAAA;AAAF,OAAc,GAAA,IAAA,CAAA;AACrB,MAAM,MAAA,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,CAAD,CAAlC,CAAA;AAEA,MAAA,MAAMC,YAAY,GAAGC,OAAO,CAAC,MAAM;AACjC,QAAO,OAAA;AACLC,UAAAA,WAAW,CAACC,IAAD,EAAO;AAChBL,YAAAA,QAAQ,CAACD,KAAK,IAAIA,KAAK,GAAGM,IAAlB,CAAR,CAAA;AACD,WAHI;;AAILT,UAAAA,QAAQ,EAAEG,KAAK,GAAG,CAAA;AAJb,SAAP,CAAA;AAMD,OAP2B,EAOzB,CAACA,KAAD,CAPyB,CAA5B,CAAA;AASA,MACE,oBAAAL,cAAA,CAAA,aAAA,CAAC,eAAD,CAAiB,QAAjB,EAAA;AAA0B,QAAA,KAAK,EAAEQ,YAAAA;AAAjC,OAAA,EACGJ,QADH,CADF,CAAA;AAKD,KApBI;;AAqBL;AAEA;AACAQ,IAAAA,WAAW,GAAG;AACZ,MAAA,OAAOC,UAAU,CAACd,eAAD,CAAV,CAA4BG,QAAnC,CAAA;AACD,KA1BI;;AA4BL;AACAY,IAAAA,WAAW,GAAG;AACZ,MAAM,MAAA;AAAEJ,QAAAA,WAAAA;AAAF,OAAkBG,GAAAA,UAAU,CAACd,eAAD,CAAlC,CAAA;AAEAgB,MAAAA,SAAS,CAAC,MAAM;AACd,QAAI,IAAA,CAACL,WAAL,EAAkB;AAChB,UAAA,OAAA;AACD,SAAA;;AACDA,QAAAA,WAAW,CAAC,CAAD,CAAX,CAAA;AACA,QAAA,OAAO,MAAM;AACXA,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX,CAAA;AACD,SAFD,CALc;AASd;AACD,OAVQ,EAUN,EAVM,CAAT,CAAA;AAWD,KAAA;;AA3CI,GAAP,CAAA;AA6CD;;;;"}