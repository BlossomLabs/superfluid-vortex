{"version":3,"file":"palettes.js","sources":["../../../../src/theme-legacy/palettes.js"],"sourcesContent":["import { warn, warnOnce } from '../utils'\nimport aragon from './aragon'\n\n// These need to match the names in the Open Color palettes\nconst THEME_NAME = 'Aragon UI'\nconst THEME_DARK_NAME = 'Aragon UI Dark'\nconst BRAND_NAME = 'Aragon Brand'\n\n// Name of the group a given palette belong to\nconst getGroupName = name => {\n  if (name === THEME_NAME) return 'theme'\n  if (name === THEME_DARK_NAME) return 'themeDark'\n  if (name === BRAND_NAME) return 'brand'\n  return 'colors'\n}\n\n// Resolve a single color\nconst resolveColor = (value, palettes) => {\n  // already resolved color\n  if (!value.startsWith('=')) {\n    return value\n  }\n\n  const [paletteName, key] = value.slice(1).split('.')\n  const color = palettes[paletteName] && palettes[paletteName][key]\n\n  if (!color) {\n    throw new Error(`resolveColor: ${value} doesn’t seem to exist`)\n  }\n\n  // follow the references until we find one\n  if (color.startsWith('=')) {\n    return resolveColor(color, palettes)\n  }\n  return color\n}\n\n// Resolve all the colors in a palette\nconst resolveColors = (palette, palettes) =>\n  Object.entries(palette).reduce((pal, [name, value]) => {\n    if (typeof value === 'string') {\n      pal[name] = resolveColor(value, palettes)\n    }\n    return pal\n  }, {})\n\n// Prepare groups from the palettes: theme, themeDark, brand and colors.\nconst generateGroups = palettes =>\n  Object.entries(palettes).reduce(\n    (groups, [paletteName, palette]) => {\n      const groupName = getGroupName(paletteName)\n\n      if (groupName === 'colors') {\n        groups.colors[paletteName] = resolveColors(palette, palettes)\n      } else {\n        groups[groupName] = resolveColors(palette, palettes)\n      }\n\n      return groups\n    },\n    { colors: {} }\n  )\n\n// Deprecate any access to the palettes\nconst { themeDark, theme, brand, colors } = Object.fromEntries(\n  Object.entries(generateGroups(aragon)).map(([name, group]) => [\n    name,\n    new Proxy(group, {\n      get(group, colorName) {\n        if (group[colorName]) {\n          warnOnce(\n            `theme-legacy:${name}.${colorName}`,\n            `${name}.${colorName} was accessed but ${name} will be removed soon, ` +\n              `please use useTheme() instead.`\n          )\n        } else {\n          warn(\n            `${name}.${colorName} doesn’t exist. ${name} will be removed soon, ` +\n              `please use useTheme() instead.`\n          )\n        }\n        return group[colorName]\n      },\n    }),\n  ])\n)\n\n// TODO: show a deprecating warning when any of these colors get accessed once.\nexport { themeDark, theme, brand, colors }\n"],"names":["THEME_NAME","THEME_DARK_NAME","BRAND_NAME","getGroupName","name","resolveColor","value","palettes","startsWith","paletteName","key","slice","split","color","Error","resolveColors","palette","Object","entries","reduce","pal","generateGroups","groups","groupName","colors","themeDark","theme","brand","fromEntries","aragon","map","group","Proxy","get","colorName","warnOnce","warn"],"mappings":"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"}