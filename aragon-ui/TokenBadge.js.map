{"version":3,"file":"TokenBadge.js","sources":["../src/components/TokenBadge/TokenBadge.js"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { ImageExists } from '../../hooks'\nimport { GU } from '../../style'\nimport { isAddress, tokenIconUrl, warn } from '../../utils'\nimport BadgeBase from '../BadgeBase/BadgeBase'\nimport TokenBadgePopover from './TokenBadgePopover'\n\nconst TokenBadge = React.memo(function TokenBadge({\n  address,\n  badgeOnly,\n  className,\n  compact,\n  explorerProvider,\n  name,\n  networkType,\n  style,\n  symbol,\n}) {\n  const badgeRef = useRef(null)\n\n  const [opened, setOpened] = useState(false)\n  const handleClose = useCallback(() => setOpened(false), [])\n  const handleOpen = useCallback(() => setOpened(true), [])\n\n  const isValidAddress = isAddress(address)\n  const iconSrc =\n    isValidAddress && networkType === 'main' ? tokenIconUrl(address) : null\n  const title = name && symbol ? `${name} (${symbol})` : symbol\n\n  if (!isValidAddress) {\n    warn(`TokenBadge: provided invalid address (${address})`)\n  }\n\n  return (\n    <BadgeBase\n      badgeRef={badgeRef}\n      className={className}\n      compact={compact}\n      disabled={badgeOnly}\n      icon={\n        <ImageExists src={iconSrc}>\n          {({ exists }) => exists && <Icon compact={compact} src={iconSrc} />}\n        </ImageExists>\n      }\n      label={\n        <span\n          css={`\n            position: relative;\n            top: 1px;\n            display: flex;\n            flex-shrink: 1;\n            min-width: 0;\n            margin-left: ${compact ? 0 : `${1 * GU}px`};\n          `}\n        >\n          {name && <Name>{name}</Name>}\n          <Symbol>{name ? `(${symbol})` : symbol}</Symbol>\n        </span>\n      }\n      onClick={isValidAddress ? handleOpen : undefined}\n      style={style}\n      title={`${title} âˆ’ ${address || 'No address'}`}\n    >\n      {popoverDisabled =>\n        !popoverDisabled &&\n        address && (\n          <TokenBadgePopover\n            address={address}\n            explorerProvider={explorerProvider}\n            iconSrc={iconSrc}\n            networkType={networkType}\n            onClose={handleClose}\n            opener={badgeRef.current}\n            title={title}\n            visible={opened}\n          />\n        )\n      }\n    </BadgeBase>\n  )\n})\nTokenBadge.propTypes = {\n  address: PropTypes.string,\n  badgeOnly: PropTypes.bool,\n  className: PropTypes.string,\n  compact: PropTypes.bool,\n  explorerProvider: PropTypes.string,\n  name: PropTypes.string,\n  networkType: PropTypes.string,\n  style: PropTypes.object,\n  symbol: PropTypes.string.isRequired,\n}\nTokenBadge.defaultProps = {\n  address: '',\n  name: '',\n  networkType: 'main',\n}\n\nfunction Icon({ compact, src, ...props }) {\n  const margin = 1 * GU\n  return (\n    <span\n      css={`\n        flex-shrink: 0;\n        display: block;\n        width: 18px;\n        height: 18px;\n        margin: 0 ${compact ? margin : 0}px 0 ${compact ? 0 : margin}px;\n        background-size: contain;\n        background-position: 50% 50%;\n        background-repeat: no-repeat;\n        background-image: url(${src});\n      `}\n      {...props}\n    />\n  )\n}\nIcon.propTypes = {\n  compact: PropTypes.bool,\n  src: PropTypes.string.isRequired,\n}\n\nconst Name = styled.span`\n  flex-shrink: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 20%;\n  margin-right: ${0.5 * GU}px;\n`\n\nconst Symbol = styled.span`\n  flex-shrink: 0;\n`\n\nexport default TokenBadge\n"],"names":["TokenBadge","React","memo","address","badgeOnly","className","compact","explorerProvider","name","networkType","style","symbol","badgeRef","useRef","opened","setOpened","useState","handleClose","useCallback","handleOpen","isValidAddress","isAddress","iconSrc","tokenIconUrl","title","warn","BadgeBase","ImageExists","exists","GU","undefined","popoverDisabled","TokenBadgePopover","current","propTypes","PropTypes","string","bool","object","isRequired","defaultProps","Icon","src","props","margin","Name","styled","span","Symbol"],"mappings":"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"}