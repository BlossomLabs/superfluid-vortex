{"version":3,"file":"useArrowKeysFocus.js","sources":["../src/hooks/useArrowKeysFocus.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react'\nimport { KEY_UP, KEY_DOWN } from '../utils'\n\nexport function useArrowKeysFocus(refs) {\n  const [highlightedIndex, setHighlightedIndex] = useState(-1)\n\n  const cycleFocus = useCallback(\n    (e, change) => {\n      e.preventDefault()\n      let next = highlightedIndex + change\n      if (next > refs.length - 1) {\n        next = 0\n      }\n      if (next < 0) {\n        next = refs.length - 1\n      }\n      setHighlightedIndex(next)\n    },\n    [highlightedIndex, refs.length]\n  )\n\n  const handleKeyDown = useCallback(\n    event => {\n      const { keyCode } = event\n      if (keyCode === KEY_UP || keyCode === KEY_DOWN) {\n        cycleFocus(event, keyCode === KEY_UP ? -1 : 1)\n      }\n    },\n    [cycleFocus]\n  )\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [handleKeyDown])\n\n  useEffect(() => {\n    if (highlightedIndex === -1) {\n      return\n    }\n    if (!refs[highlightedIndex]) {\n      return\n    }\n    refs[highlightedIndex].focus()\n  }, [highlightedIndex, refs])\n\n  return {\n    highlightedIndex,\n    setHighlightedIndex,\n  }\n}\n"],"names":["useArrowKeysFocus","refs","highlightedIndex","setHighlightedIndex","useState","cycleFocus","useCallback","e","change","preventDefault","next","length","handleKeyDown","event","keyCode","KEY_UP","KEY_DOWN","useEffect","document","addEventListener","removeEventListener","focus"],"mappings":";;;;;;;AAGO,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AACtC,EAAM,MAAA,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CC,cAAQ,CAAC,CAAC,CAAF,CAAxD,CAAA;AAEA,EAAMC,MAAAA,UAAU,GAAGC,iBAAW,CAC5B,CAACC,CAAD,EAAIC,MAAJ,KAAe;AACbD,IAAAA,CAAC,CAACE,cAAF,EAAA,CAAA;AACA,IAAA,IAAIC,IAAI,GAAGR,gBAAgB,GAAGM,MAA9B,CAAA;;AACA,IAAA,IAAIE,IAAI,GAAGT,IAAI,CAACU,MAAL,GAAc,CAAzB,EAA4B;AAC1BD,MAAAA,IAAI,GAAG,CAAP,CAAA;AACD,KAAA;;AACD,IAAIA,IAAAA,IAAI,GAAG,CAAX,EAAc;AACZA,MAAAA,IAAI,GAAGT,IAAI,CAACU,MAAL,GAAc,CAArB,CAAA;AACD,KAAA;;AACDR,IAAAA,mBAAmB,CAACO,IAAD,CAAnB,CAAA;AACD,GAX2B,EAY5B,CAACR,gBAAD,EAAmBD,IAAI,CAACU,MAAxB,CAZ4B,CAA9B,CAAA;AAeA,EAAA,MAAMC,aAAa,GAAGN,iBAAW,CAC/BO,KAAK,IAAI;AACP,IAAM,MAAA;AAAEC,MAAAA,OAAAA;AAAF,KAAA,GAAcD,KAApB,CAAA;;AACA,IAAA,IAAIC,OAAO,KAAKC,eAAZ,IAAsBD,OAAO,KAAKE,iBAAtC,EAAgD;AAC9CX,MAAAA,UAAU,CAACQ,KAAD,EAAQC,OAAO,KAAKC,eAAZ,GAAqB,CAAC,CAAtB,GAA0B,CAAlC,CAAV,CAAA;AACD,KAAA;AACF,GAN8B,EAO/B,CAACV,UAAD,CAP+B,CAAjC,CAAA;AAUAY,EAAAA,eAAS,CAAC,MAAM;AACdC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCP,aAArC,CAAA,CAAA;AACA,IAAO,OAAA,MAAMM,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCR,aAAxC,CAAb,CAAA;AACD,GAHQ,EAGN,CAACA,aAAD,CAHM,CAAT,CAAA;AAKAK,EAAAA,eAAS,CAAC,MAAM;AACd,IAAA,IAAIf,gBAAgB,KAAK,CAAC,CAA1B,EAA6B;AAC3B,MAAA,OAAA;AACD,KAAA;;AACD,IAAA,IAAI,CAACD,IAAI,CAACC,gBAAD,CAAT,EAA6B;AAC3B,MAAA,OAAA;AACD,KAAA;;AACDD,IAAAA,IAAI,CAACC,gBAAD,CAAJ,CAAuBmB,KAAvB,EAAA,CAAA;AACD,GARQ,EAQN,CAACnB,gBAAD,EAAmBD,IAAnB,CARM,CAAT,CAAA;AAUA,EAAO,OAAA;AACLC,IAAAA,gBADK;AAELC,IAAAA,mBAAAA;AAFK,GAAP,CAAA;AAID;;;;"}