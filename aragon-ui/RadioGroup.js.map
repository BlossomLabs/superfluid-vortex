{"version":3,"file":"RadioGroup.js","sources":["../src/components/Radio/RadioGroup.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { stylingProps, noop } from '../../utils'\n\nconst { Provider, Consumer } = React.createContext({})\n\nclass RadioGroup extends React.PureComponent {\n  static propTypes = {\n    children: PropTypes.node,\n    selected: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    onChange: PropTypes.func,\n  }\n  static defaultProps = {\n    onChange: noop,\n  }\n  state = {\n    // keep track of the radios buttons to handle keyboard navigation\n    radios: new Set(),\n  }\n  handleChange = id => {\n    this.props.onChange(id)\n  }\n  addRadio = id => {\n    this.setState(state => {\n      const radios = new Set(state.radios)\n      radios.add(id)\n      return { radios }\n    })\n  }\n  removeRadio = id => {\n    this.setState(state => {\n      const radios = new Set(state.radios)\n      radios.delete(id)\n      return { radios }\n    })\n  }\n  getSiblingId(position) {\n    const { selected } = this.props\n    const radios = [...this.state.radios]\n    const selectedIndex = selected === undefined ? 0 : radios.indexOf(selected)\n    const newSelectedIndex = selectedIndex + position\n\n    // no radios\n    if (radios.length === 0) {\n      return null\n    }\n\n    // up on the first item: go to the last one\n    if (newSelectedIndex === -1) {\n      return radios[radios.length - 1]\n    }\n\n    // down on the last item: go to the first one\n    if (newSelectedIndex === radios.length) {\n      return radios[0]\n    }\n\n    // select the item item if possible\n    if (selectedIndex > -1 && radios[newSelectedIndex]) {\n      return radios[newSelectedIndex]\n    }\n\n    // default: select the first item if available\n    return radios[0] === undefined ? null : radios[0]\n  }\n  selectPrev = () => {\n    const id = this.getSiblingId(-1)\n    if (id !== null) {\n      this.props.onChange(id)\n    }\n  }\n  selectNext = () => {\n    const id = this.getSiblingId(1)\n    if (id !== null) {\n      this.props.onChange(id)\n    }\n  }\n  render() {\n    const { radios } = this.state\n    const { children, selected } = this.props\n    const focusableId = radios.has(selected) ? selected : [...radios][0]\n    return (\n      <Provider\n        value={{\n          selected,\n          focusableId,\n          onChange: this.handleChange,\n          addRadio: this.addRadio,\n          removeRadio: this.removeRadio,\n          selectPrev: this.selectPrev,\n          selectNext: this.selectNext,\n        }}\n      >\n        <div role=\"radiogroup\" {...stylingProps(this)}>\n          {children}\n        </div>\n      </Provider>\n    )\n  }\n}\n\nexport { Consumer as RadioGroupConsumer }\nexport default RadioGroup\n"],"names":["Provider","Consumer","React","createContext","RadioGroup","PureComponent","_defineProperty","radios","Set","id","props","onChange","setState","state","add","delete","getSiblingId","position","selected","selectedIndex","undefined","indexOf","newSelectedIndex","length","render","children","focusableId","has","handleChange","addRadio","removeRadio","selectPrev","selectNext","_extends","stylingProps","PropTypes","node","oneOfType","string","number","func","noop"],"mappings":"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"}